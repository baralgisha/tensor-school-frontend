# Работа с асинхронным кодом через callback

callback (коллбек) - функция, переданная как параметр в другую функцию, которая будет вызвана в нужный момент.

Рассмотрим пример использования коллбека.  

Функция loadScript принимает три аргумента: url - путь до файла со скриптом, onSuccess - функция, которая будет вызвана при успешной загрузке, onError - функция, которая будет вызвана при ошибке загрузки.

```javascript
    loadScript('./dialog.js', function(dialog) {
        // если скрипт загружен успешно - используем необходимый функционал скрипта
        dialog.openPopup(config);
    }, function(err) {
        // в случае если произошла ошибка, обрабатываем ее
        errorHandler(err);
    });
```

Данный способ работы с асинхронностью может приводить к большой вложенности кода. Давайте взглянем на пример:

Представьте, что данные для отображения в попапе тоже нужно запросить по сети.

```javascript
    loadScript('./usersData.js', function(err, data) {
        if (data.getCount()) {
            loadScript('./dialog.js', function(err, dialog) {
                data.each(function(config) {
                    if (config.id === id) {
                        dialog.openPopup(config);
                    }
                });
            }, function(err) {
                errorHandler(err);
            });
        }
    }, function(err) {
        errorHandler(err);
    })
```

Данный пример мог быть еще больше. В подобном коде трудно интуитивно разобраться. Такого рода конструкции (растущие вбок) называют ***callback hell*** или ад обратных вызовов.

В современном JavaScript есть подходы, которые позволяют избежать этого. Их мы разберем с ледующих главах.