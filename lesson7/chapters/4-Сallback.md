# Работа с асинхронным кодом через callback

callback (колбек) - функция, переданная как параметр в другую функцию, которая будет вызвана в нужный момент.

Рассмотрим пример использования колбека.  

Функция loadScript принимает три аргумента: url - путь до файла со скриптом, onSuccess - функция, которая будет вызвана при успешной загрузке, onError - функция, которая будет вызвана при ошибке загрузки.

```javascript
    loadScript('./dialog.js', function(dialog) {
        // если скрипт загружен успешно - используем необходимый функционал скрипта
        dialog.open(config);
    }, function(err) {
        // в случае если произошла ошибка, обрабатываем ее
        errorHandler(err);
    });
```

Данный способ работы с асинхронностью может приводить к большой вложенности кода. Давайте взглянем на пример:

Представьте, что данные для отображения тоже нужно запросить по сети.

```javascript
    loadScript('./usersData.js', function(err, data) {
        if (data.getCount()) {
            loadScript('./dialog.js', function(err, dialog) {
                data.each(function(config) {
                    if (config.id === id) {
                        dialog.open(config);
                    }
                });
            }, function(err) {
                errorHandler(err);
            });
        }
    }, function(err) {
        errorHandler(err);
    });
```

Уже в этом коде сложно разобраться, хоть это и маленький пример. Растущие вбок конструкции, когда один колбек вызывает другой и т.д., называют ***callback hell*** или ад обратных вызовов.

В современном JavaScript есть подходы, которые позволяют избежать этого. Их мы разберем с cледующих главах.