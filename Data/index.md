# Данные

В этом разделе мы разберем что такое протокол HTTP и как с его помощью получать данные для сайта/приложения. Так же разберем некоторые архитектурные подходы для создания API.

## Введение в HTTP

HTTP - Hypertext Transfer Protocol (Протокол передачи гипертекста) - это прикладной протокол для передачи гипертекстовых документов, таких как HTML. Протокол HTTP лежит в основе обмена данными в Интернете. HTTP является протоколом клиент-серверного взаимодействия, что означает инициирование запросов к серверу самим получателем, обычно веб-браузером.

Обмен данными между клиентом и сервером происходит с помощью HTTP сообщений. Сообщения HTTP состоят из текстовой информации в кодировке ASCII, записанной в несколько строк. В HTTP/1.1 и более ранних версиях они пересылались в качестве обычного текста. В HTTP/2 текстовое сообщение разделяется на фреймы, что позволяет выполнить оптимизацию и повысить производительность.

HTTP запросы и ответы имеют близкую структуру. Они состоят из:

1. Стартовой строки, описывающей запрос, или статус (успех или сбой). Это всегда одна строка.
2. Произвольного набора HTTP заголовков, определяющих запрос или описывающих тело сообщения.
3. Пустой строки, указывающей, что вся мета информация отправлена.
4. Произвольного тела, содержащего пересылаемые с запросом данные (например, содержимое HTML-формы ) или отправляемый в ответ документ. Наличие тела и его размер определяется стартовой строкой и заголовками HTTP.

### HTTP запрос

#### Стартовая строка

Стартовая строка состоит из трёх элементов:

* Метод HTTP. Методов много, основные - GET, HEAD, POST и PUT. Например, GET указывает, что нужно получить некоторый ресурс, а POST означает отправку данных на сервер.
* Путь запроса. Обычно URL, или абсолютный путь протокола, порт и домен обычно характеризуются контекстом запроса.
* Версия HTTP, определяющая структуру оставшегося сообщения, указывая, какую версию предполагается использовать для ответа.

#### Заголовки запроса

Структура HTTP заголовка: не зависящая от регистра строка, завершаемая двоеточием и значение, структура которого определяется заголовком. Весь заголовок, включая значение, представляет собой одну строку.

        content-type: text/html; charset=UTF-8

У запроса могут быть заголовки, характерные только для запроса, например, User-Agent, уточняющие запрос, придающие контекст, или накладывающие ограничения на условия.

Побробнее про HTTP заголовки можно посмотреть [тут](https://developer.mozilla.org/ru/docs/Web/HTTP/Headers)

#### Тело

Тело бывает не у всех запросов: запросы, собирающие ресурсы, такие как GET, HEAD, DELETE, или OPTIONS, в нем обычно не нуждаются. Но некоторые запросы отправляют на сервер данные для обновления, как это часто бывает с запросами POST.

### HTTP ответ

#### Стартовая строка

Стартовая строка состоит из трёх элементов:

* Версию протокола, например HTTP/1.1.
* Код состояния ([status code](https://developer.mozilla.org/ru/docs/Web/HTTP/Status)), показывающая, был ли запрос успешным.
* Пояснение. Краткое текстовое описание кода состояния, помогающее пользователю понять сообщение HTTP.
Пример строки статуса: `HTTP/1.1 404 Not Found`.

#### Заголовки ответ

Тоже что и у HTTP запроса.

У ответа, как и у запроса, могут быть заголовки, характерные только для ответа, например, Accept-Ranges, уведомляющие клиент о некоторых возможностях сервера.

#### Тело

Тело есть не у всех ответов: у ответов с кодом состояния, например, 201 или 204, оно обычно отсутствует.

## HTTP методы

В HTTP есть множество методов запроса, которые указывают, какое желаемое действие выполнится для данного ресурса.

Самые используемые методы:

* GET - запрашивает представление ресурса.

* POST - используется для отправки сущностей к определённому ресурсу.

* PATCH - используется для частичного изменения ресурса.

* PUT - используется для изменения ресурса.

* DELETE - используется для удаления ресурса.

Методы могут быть безопасными, идемпотентными или кешируемыми.

Безопастные - не меняют состояние сервера.

Кешируемые - которые могут быть закешированы, то есть сохранены для дальнейшего восстановления и использования позже, тем самым снижая число запросов к серверу.

Идемпотентные - методы, котрые при повторном идентичном запросе имеют один и тот же эффект, не изменяющий состояние сервера.

Побробнее про HTTP методы можно посмотреть [тут](https://developer.mozilla.org/ru/docs/Web/HTTP/Methods)

## REST

REST расшифровывается как REpresentational State Transfer. Это архитектурный подход для создания API.
В REST API каждая единица информации однозначно определяется глобальным идентификатором, таким как URL. Это значит, что URL по сути является первичным ключом для единицы данных.

Например, есть интернет-магазин книг. Тогда:

* все книги можно получить по URL - /books
* какая-то конкретная книга - /book/4

Для HTTP действие над данными задается с помощью методов: GET (получить), PUT (добавить, заменить), POST (добавить, изменить, удалить), DELETE (удалить). Таким образом, действия CRUD (Create-Read-Updtae-Delete) могут выполняться как со всеми 4-мя методами, так и только с помощью GET и POST.

* все книги можно получить, используя метод GET по URL - GET /books HTTP/1.1
* какая-то конкретная книга - GET /book/1 HTTP/1.1
* удалить книгу - DELETE /book/5 HTTP/1.1
* модифицировать книгу - PATCH /book/5 HTTP/1.1





## JSON-PRC
## GraphQL