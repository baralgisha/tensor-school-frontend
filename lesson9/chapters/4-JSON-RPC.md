# JSON-RPC

JSON-RPC - это stateless-протокол для создания API в стиле RPC (Remote Procedure Call).

На сервере есть один единственный endpoint, который принимает запросы с телом вида:

```
   {"jsonrpc": "2.0", "method": "books.get", "params": {"author": "Tolkien"}, "id": 1}
```
Структура запроса:

* jsonrpc - строка, указывающая версию JSON-RPC протокола. Должна быть именно "2.0".
* method - строка, содержащая имя метода, который должен быть вызван.
* params (необязательный) - структурированное значения параметров, которые будут использоваться во время вызова метода.
* id (необязательный) - идентификатор, установленный клиентом. Должен содержать значение String, Number или NULL, если указан. Если он не указан, предполагается, что это уведомление. Обычно значение не должно быть Null, а числа не должны содержать дробные части.

В рамках HTTP все запросы делаются с помощью метода POST.

И отдает ответы вида:

```
   {"jsonrpc": "2.0", "result": [{"autor":"J. R. R. Tolkien","title":"The Lord of the Rings","price":10000},...], "id": 1}
```

Если возникает ошибка — ответ об ошибке:

```
   {"jsonrpc": "2.0", "error": {"code": 666, "message": "Books not found"}, "id": "1"}
```

Структура ответа:

* jsonrpc - как в запросе.
* result - обязателен в случае успеха, не должен быть в случае ошибки. Резултат вызова указанного в запросе метода на сервере.
* error - обязателен в случае ошибки, не должен быть в случае успеха. Значением должен быть объект с полями:
   * code - целочисленное число, идентификатор типа ошибки
   * mesage - строка с коротким описание ошибки
   * data (необязательный) - любой тип данных, содержащий дополнительную информацию об ошибке
* id - идентификатор. Должен быть таким же, как значение члена id в объекте запроса.

